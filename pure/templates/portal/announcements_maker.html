{% if current_user.user == "admin" %}
    {% extends 'portal/admin.html' %}
{% elif current_user.user == "faculty" %}
    {% extends 'portal/faculty.html' %}
{% elif current_user.user == "student" %}
    {% extends 'portal/student.html' %}
{% endif %}


{% block content %}
    <h1>Announcement Maker</h1>
    <form method='POST'>
        {{ form.hidden_tag() }}
        {{ form.title.label() }}
        {{ form.title() }}
        {{ form.subject.label() }}
        {{ form.subject() }}
        {{ form.target.label() }}
        <br />
        {% if current_user.role != 'cr' %}
            {% if current_user.user == 'admin' %}
                {{ form.target_everyone(id="target_everyone") }}
                {{ form.target_everyone.label() }}
                <br />
                {{ form.target_faculty(id="target_faculty") }}
                {{ form.target_faculty.label() }}
                <br />
            {% endif %}
            {% if current_user.user == 'faculty' %}
                {{ form.target_faculty(id="target_faculty") }}
                {{ form.target_faculty.label() }}
                <br />
            {% endif %}
            {{ form.target_students(id="target_students") }}
            {{ form.target_students.label() }}
        {% endif %}
        {{ form.target() }}
        {{ form.desc.label() }}
        {{ form.desc() }}
        {{ form.submit() }}
    </form>
    <ul>
        {% for announcement in announcements %}
            <p>{{ announcement["author"][1] }}</p>
            <p>{{ announcement["date"].date() }}</p>
            <p>{{ announcement["date"].time() }}</p>
            <h3>{{ announcement["title"] }}</h3>
            <h4>{{ announcement["subject"] }}</h4>
            <p>{{ announcement["desc"] }}</p>
            <button id="{{ announcement["_id"] }}" onclick="del_announcement(this.id)">-</button>
            <br><br>
        {% endfor %}
    </ul>
    <script defer src="{{ url_for('main.catch_all', path='announcement_maker.js') }}"
            announcement_url="{{ url_for('announcement.manipulate_announcements') }}"></script>
{% endblock %}

